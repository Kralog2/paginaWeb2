<% title = "Panel de Administración" %>
<div class="max-w-5xl mx-auto bg-gray-800 p-8 rounded-xl mt-12 text-white shadow-lg border border-gray-700">
  <h1 class="text-3xl font-bold mb-6 text-center">Panel de Administración</h1>
  <form method="GET" action="/admin/dashboard" class="flex justify-center mb-6 gap-2">
  <input
    type="text"
    name="search"
    value="<%= search || '' %>"
    placeholder="Buscar por nombre o email..."
    class="w-1/2 px-4 py-2 rounded-l bg-gray-700 text-white border-none focus:outline-none"
  />
  <select name="role" class="px-4 py-2 bg-gray-700 text-white rounded">
    <option value="">Todos los roles</option>
    <option value="admin" <%= role === "admin" ? "selected" : "" %>>Admin</option>
    <option value="user" <%= role === "user" ? "selected" : "" %>>Usuario</option>
  </select>
  <button
    type="submit"
    class="px-6 py-2 bg-blue-600 rounded-r hover:bg-blue-700 text-white font-semibold"
  >
    Buscar
  </button>
</form>
  <p class="mb-4 text-lg">Usuarios registrados: <span class="font-bold"><%= users.length %></span></p>
  <div class="overflow-x-auto">
    <table class="w-full table-auto mb-8 rounded-lg overflow-hidden">
      <thead>
        <tr class="bg-gray-700">
          <th class="py-2 px-4">ID</th>
          <th class="py-2 px-4">Nombre</th>
          <th class="py-2 px-4">Email</th>
          <th class="py-2 px-4">Rol</th>
          <th class="py-2 px-4">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach(u => { %>
          <tr class="border-b border-gray-600 hover:bg-gray-900 transition">
            <td class="py-2 px-4"><%= u.id %></td>
            <td class="py-2 px-4"><%= u.name %></td>
            <td class="py-2 px-4"><%= u.email %></td>
            <td class="py-2 px-4"><%= u.role %></td>
            <td class="py-2 px-4">
              <% if (u.id !== user.id) { %>
                <form action="/admin/dashboard/delete/<%= u.id %>" method="POST" onsubmit="return confirm('¿Eliminar usuario?');">
                  <button type="submit" class="bg-red-600 px-3 py-1 rounded hover:bg-red-700 text-white">Eliminar</button>
                </form>
              <% } else { %>
                <span class="text-gray-400">Tú</span>
              <% } %>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>